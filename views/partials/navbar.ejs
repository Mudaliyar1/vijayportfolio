<nav class="bg-dark-200 border-b border-gray-800">
  <div class="container mx-auto px-4">
    <div class="flex justify-between items-center py-4">
      <!-- Logo -->
      <a href="/" class="flex items-center space-x-2">
        <span class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-neon-blue to-neon-purple">FTRAISE AI</span>
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center space-x-6">
        <a href="/" class="text-gray-300 hover:text-white transition-colors">Home</a>
        <a href="/chat" class="text-gray-300 hover:text-white transition-colors">AI Chat</a>
        <a href="/images" class="text-gray-300 hover:text-white transition-colors">AI Images</a>
        <a href="/about" class="text-gray-300 hover:text-white transition-colors">About</a>

        <% if (user) { %>
          <div class="relative group">
            <button class="flex items-center space-x-2 text-gray-300 hover:text-white transition-colors focus:outline-none">
              <img src="<%= user.profilePicture %>" alt="<%= user.username %>" class="w-8 h-8 rounded-full object-cover border border-neon-blue">
              <span><%= user.username %></span>
              <i class="fas fa-chevron-down text-xs"></i>
            </button>
            <div class="absolute right-0 mt-2 w-48 bg-dark-100 border border-gray-800 rounded-md shadow-lg py-1 z-10 hidden group-hover:block">
              <% if (user.role === 'admin') { %>
                <a href="/admin" class="block px-4 py-2 text-sm text-gray-300 hover:bg-dark-200 hover:text-white">
                  <i class="fas fa-tachometer-alt mr-2"></i> Admin Dashboard
                </a>
              <% } %>
              <a href="/profile" class="block px-4 py-2 text-sm text-gray-300 hover:bg-dark-200 hover:text-white">
                <i class="fas fa-user mr-2"></i> My Profile
              </a>
              <a href="/rate-limits/request" class="block px-4 py-2 text-sm text-gray-300 hover:bg-dark-200 hover:text-white">
                <i class="fas fa-tachometer-alt mr-2"></i> Request Rate Limit
              </a>
              <a href="/users/logout" class="block px-4 py-2 text-sm text-gray-300 hover:bg-dark-200 hover:text-white">
                <i class="fas fa-sign-out-alt mr-2"></i> Logout
              </a>
            </div>
          </div>
        <% } else { %>
          <a href="/users/login" class="px-4 py-2 rounded-md bg-gradient-to-r from-neon-blue to-neon-purple text-white hover:opacity-90 transition-opacity">Login</a>
          <a href="/users/register" class="px-4 py-2 rounded-md border border-neon-blue text-white hover:bg-neon-blue/10 transition-colors">Register</a>
        <% } %>
      </div>

      <!-- Mobile Menu Button -->
      <button id="mobile-menu-button" class="md:hidden text-gray-300 hover:text-white focus:outline-none">
        <i class="fas fa-bars text-xl"></i>
      </button>
    </div>

    <!-- Mobile Navigation -->
    <div id="mobile-menu" class="md:hidden hidden pb-4">
      <div class="flex flex-col space-y-3">
        <a href="/" class="text-gray-300 hover:text-white transition-colors py-2">Home</a>
        <a href="/chat" class="text-gray-300 hover:text-white transition-colors py-2">AI Chat</a>
        <a href="/images" class="text-gray-300 hover:text-white transition-colors py-2">AI Images</a>
        <a href="/about" class="text-gray-300 hover:text-white transition-colors py-2">About</a>

        <% if (user) { %>
          <div class="border-t border-gray-800 my-2 pt-2">
            <div class="flex items-center space-x-2 mb-3">
              <img src="<%= user.profilePicture %>" alt="<%= user.username %>" class="w-8 h-8 rounded-full object-cover border border-neon-blue">
              <span class="text-white"><%= user.username %></span>
            </div>
            <% if (user.role === 'admin') { %>
              <a href="/admin" class="block py-2 text-gray-300 hover:text-white">
                <i class="fas fa-tachometer-alt mr-2"></i> Admin Dashboard
              </a>
            <% } %>
            <a href="/profile" class="block py-2 text-gray-300 hover:text-white">
              <i class="fas fa-user mr-2"></i> My Profile
            </a>
            <a href="/rate-limits/request" class="block py-2 text-gray-300 hover:text-white">
              <i class="fas fa-tachometer-alt mr-2"></i> Request Rate Limit
            </a>
            <a href="/users/logout" class="block py-2 text-gray-300 hover:text-white">
              <i class="fas fa-sign-out-alt mr-2"></i> Logout
            </a>
          </div>
        <% } else { %>
          <div class="flex flex-col space-y-3 pt-2">
            <a href="/users/login" class="px-4 py-2 rounded-md bg-gradient-to-r from-neon-blue to-neon-purple text-white hover:opacity-90 transition-opacity text-center">Login</a>
            <a href="/users/register" class="px-4 py-2 rounded-md border border-neon-blue text-white hover:bg-neon-blue/10 transition-colors text-center">Register</a>
          </div>
        <% } %>
      </div>
    </div>
  </div>
</nav>

<script>
  // Mobile menu toggle
  document.getElementById('mobile-menu-button').addEventListener('click', function() {
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenu.classList.toggle('hidden');
  });
</script>
