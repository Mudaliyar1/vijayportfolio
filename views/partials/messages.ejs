<%
// Define default values for flash messages if they don't exist
var errors = typeof errors !== 'undefined' ? errors : [];
var success_msg = typeof success_msg !== 'undefined' ? success_msg : '';
var error_msg = typeof error_msg !== 'undefined' ? error_msg : '';
var warning_msg = typeof warning_msg !== 'undefined' ? warning_msg : '';
var error = typeof error !== 'undefined' ? error : '';

// Convert to arrays if they're strings
if (typeof errors === 'string') errors = [{ msg: errors }];
if (!Array.isArray(errors)) errors = [];
%>

<!-- Flash messages are handled by flash-messages.js -->

<%
// Only show messages if they're explicitly set and not empty
if(Array.isArray(errors) && errors.length > 0){
%>
  <% errors.forEach(function(error) {
    if (error && error.msg) {
  %>
    <div class="flash-message bg-red-900/50 border border-red-500 text-white px-4 py-3 rounded-md mb-4 flex items-start justify-between animate-fade-in transition-opacity duration-500">
      <div class="flex items-center">
        <i class="fas fa-exclamation-circle mr-2"></i>
        <%= error.msg %>
      </div>
      <button class="text-white hover:text-red-300 focus:outline-none" onclick="this.parentElement.remove()">
        <i class="fas fa-times"></i>
      </button>
    </div>
  <% } }); %>
<% } %>

<%
// Only show success message if it's explicitly set and not empty
if(success_msg && typeof success_msg === 'string' && success_msg.trim() !== ''){
%>
  <div class="flash-message bg-green-900/50 border border-green-500 text-white px-4 py-3 rounded-md mb-4 flex items-start justify-between animate-fade-in transition-opacity duration-500">
    <div class="flex items-center">
      <i class="fas fa-check-circle mr-2"></i>
      <%= success_msg %>
    </div>
    <button class="text-white hover:text-green-300 focus:outline-none" onclick="this.parentElement.remove()">
      <i class="fas fa-times"></i>
    </button>
  </div>
<% } %>

<%
// Only show error message if it's explicitly set and not empty
if(error_msg && typeof error_msg === 'string' && error_msg.trim() !== ''){
%>
  <div class="flash-message bg-red-900/50 border border-red-500 text-white px-4 py-3 rounded-md mb-4 flex items-start justify-between animate-fade-in transition-opacity duration-500">
    <div class="flex items-center">
      <i class="fas fa-exclamation-circle mr-2"></i>
      <%= error_msg %>
    </div>
    <button class="text-white hover:text-red-300 focus:outline-none" onclick="this.parentElement.remove()">
      <i class="fas fa-times"></i>
    </button>
  </div>
<% } %>

<%
// Only show warning message if it's explicitly set and not empty
if(warning_msg && typeof warning_msg === 'string' && warning_msg.trim() !== ''){
%>
  <div class="flash-message bg-yellow-900/50 border border-yellow-500 text-white px-4 py-3 rounded-md mb-4 flex items-start justify-between animate-fade-in transition-opacity duration-500">
    <div class="flex items-center">
      <i class="fas fa-exclamation-triangle mr-2"></i>
      <%= warning_msg %>
    </div>
    <button class="text-white hover:text-yellow-300 focus:outline-none" onclick="this.parentElement.remove()">
      <i class="fas fa-times"></i>
    </button>
  </div>
<% } %>

<%
// Only show error if it's explicitly set and not empty
if(error && typeof error === 'string' && error.trim() !== ''){
%>
  <div class="flash-message bg-red-900/50 border border-red-500 text-white px-4 py-3 rounded-md mb-4 flex items-start justify-between animate-fade-in transition-opacity duration-500">
    <div class="flex items-center">
      <i class="fas fa-exclamation-circle mr-2"></i>
      <%= error %>
    </div>
    <button class="text-white hover:text-red-300 focus:outline-none" onclick="this.parentElement.remove()">
      <i class="fas fa-times"></i>
    </button>
  </div>
<% } %>

<!-- Flash messages are handled by flash-messages.js -->
