<!-- Admin Create Template Page -->
<div class="container mx-auto px-4 py-8">
  <div class="mb-6">
    <a href="/admin/templates" class="text-gray-400 hover:text-white flex items-center">
      <i class="fas fa-arrow-left mr-2"></i> Back to Templates
    </a>
  </div>

  <div class="bg-dark-200 rounded-lg shadow-lg overflow-hidden">
    <div class="p-4 border-b border-gray-700">
      <h2 class="text-lg font-semibold text-white">Create New Template</h2>
    </div>

    <form action="/admin/templates/create" method="POST" enctype="multipart/form-data" class="p-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Basic Information -->
        <div class="space-y-4">
          <h3 class="text-white font-medium mb-2">Basic Information</h3>

          <div>
            <label for="name" class="block text-gray-300 mb-1">Template Name</label>
            <input type="text" id="name" name="name" class="w-full bg-dark-300 border border-gray-600 rounded-md px-3 py-2 text-white focus:outline-none focus:border-neon-blue" required>
          </div>

          <div>
            <label for="description" class="block text-gray-300 mb-1">Description</label>
            <textarea id="description" name="description" rows="3" class="w-full bg-dark-300 border border-gray-600 rounded-md px-3 py-2 text-white focus:outline-none focus:border-neon-blue" required></textarea>
          </div>

          <div>
            <label for="businessType" class="block text-gray-300 mb-1">Business Type</label>
            <select id="businessType" name="businessType" class="w-full bg-dark-300 border border-gray-600 rounded-md px-3 py-2 text-white focus:outline-none focus:border-neon-blue" required>
              <option value="">Select Business Type</option>
              <option value="Restaurant">Restaurant</option>
              <option value="Technology">Technology</option>
              <option value="Retail Store">Retail Store</option>
              <option value="Professional Services">Professional Services</option>
              <option value="Healthcare">Healthcare</option>
              <option value="Education">Education</option>
              <option value="Beauty">Beauty</option>
              <option value="Real Estate">Real Estate</option>
              <option value="Fitness">Fitness</option>
              <option value="Travel">Travel</option>
              <option value="Photography">Photography</option>
              <option value="Art & Design">Art & Design</option>
              <option value="Construction">Construction</option>
              <option value="Automotive">Automotive</option>
              <option value="Legal">Legal</option>
              <option value="Finance">Finance</option>
              <option value="Entertainment">Entertainment</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div>
            <label for="thumbnail" class="block text-gray-300 mb-1">Thumbnail Image</label>
            <input type="file" id="thumbnail" name="thumbnail" accept="image/*" class="w-full bg-dark-300 border border-gray-600 rounded-md px-3 py-2 text-white focus:outline-none focus:border-neon-blue">
            <p class="text-gray-400 text-xs mt-1">Recommended size: 800x600px. Max file size: 5MB.</p>
          </div>
        </div>

        <!-- Template Settings -->
        <div class="space-y-4">
          <h3 class="text-white font-medium mb-2">Template Settings</h3>

          <div>
            <label for="theme" class="block text-gray-300 mb-1">Theme</label>
            <select id="theme" name="theme" class="w-full bg-dark-300 border border-gray-600 rounded-md px-3 py-2 text-white focus:outline-none focus:border-neon-blue">
              <option value="default">Default</option>
              <option value="modern">Modern</option>
              <option value="minimal">Minimal</option>
              <option value="bold">Bold</option>
              <option value="elegant">Elegant</option>
              <option value="professional">Professional</option>
            </select>
          </div>

          <div class="flex items-center mt-4">
            <input type="checkbox" id="isResponsive" name="isResponsive" class="h-4 w-4 text-neon-blue focus:ring-neon-blue border-gray-600 rounded" checked>
            <label for="isResponsive" class="ml-2 block text-gray-300">Responsive Design</label>
            <span class="ml-2 text-xs text-gray-400">(Optimized for mobile devices)</span>
          </div>

          <div>
            <label for="colorScheme" class="block text-gray-300 mb-1">Color Scheme</label>
            <select id="colorScheme" name="colorScheme" class="w-full bg-dark-300 border border-gray-600 rounded-md px-3 py-2 text-white focus:outline-none focus:border-neon-blue">
              <option value="blue">Blue</option>
              <option value="green">Green</option>
              <option value="purple">Purple</option>
              <option value="red">Red</option>
              <option value="orange">Orange</option>
              <option value="pink">Pink</option>
              <option value="teal">Teal</option>
              <option value="gray">Gray</option>
            </select>
          </div>

          <div>
            <label for="packageType" class="block text-gray-300 mb-1">Required Package</label>
            <select id="packageType" name="packageType" class="w-full bg-dark-300 border border-gray-600 rounded-md px-3 py-2 text-white focus:outline-none focus:border-neon-blue">
              <option value="All">All Packages</option>
              <option value="Free">Free</option>
              <%
                // Show all packages except Free (which is already shown above)
                packages.forEach(pkg => {
                  if (pkg.name !== 'Free') {
              %>
                  <option value="<%= pkg.name %>"><%= pkg.name %></option>
              <%
                  }
                });
              %>
            </select>
            <p class="text-gray-400 text-xs mt-1">This template will only be available to users with exactly this package. Select 'All Packages' to make it available to everyone.</p>
          </div>

          <div>
            <label for="pageCount" class="block text-gray-300 mb-1">Number of Pages</label>
            <input type="number" id="pageCount" name="pageCount" min="1" max="20" value="4" class="w-full bg-dark-300 border border-gray-600 rounded-md px-3 py-2 text-white focus:outline-none focus:border-neon-blue">
          </div>

          <div class="flex items-center">
            <input type="checkbox" id="active" name="active" class="h-4 w-4 text-neon-blue focus:ring-neon-blue border-gray-600 rounded" checked>
            <label for="active" class="ml-2 block text-gray-300">Active</label>
          </div>
        </div>
      </div>

      <div class="mt-8 border-t border-gray-700 pt-6">
        <div class="flex justify-end">
          <a href="/admin/templates" class="px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 mr-3">Cancel</a>
          <button type="submit" class="px-4 py-2 bg-neon-blue text-white rounded-md hover:bg-blue-600">Create Template</button>
        </div>
      </div>
    </form>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Preview thumbnail image
    const thumbnailInput = document.getElementById('thumbnail');
    thumbnailInput.addEventListener('change', function() {
      if (this.files && this.files[0]) {
        const reader = new FileReader();

        reader.onload = function(e) {
          // Create preview if it doesn't exist
          let preview = document.getElementById('thumbnail-preview');
          if (!preview) {
            preview = document.createElement('div');
            preview.id = 'thumbnail-preview';
            preview.className = 'mt-2';
            thumbnailInput.parentNode.appendChild(preview);
          }

          preview.innerHTML = `
            <div class="relative w-32 h-24 rounded-md overflow-hidden border border-gray-600">
              <img src="${e.target.result}" alt="Thumbnail Preview" class="w-full h-full object-cover">
            </div>
          `;
        }

        reader.readAsDataURL(this.files[0]);
      }
    });

    // Auto-update page count based on package
    const packageTypeSelect = document.getElementById('packageType');
    const pageCountInput = document.getElementById('pageCount');

    packageTypeSelect.addEventListener('change', function() {
      const packageType = this.value;

      // Set default page counts based on package type
      if (packageType === 'Free') {
        pageCountInput.value = 1;
      } else if (packageType === 'Basic') {
        pageCountInput.value = 3;
      } else if (packageType === 'Professional') {
        pageCountInput.value = 5;
      } else if (packageType === 'Business') {
        pageCountInput.value = 10;
      } else if (packageType === 'Enterprise') {
        pageCountInput.value = 20;
      } else {
        pageCountInput.value = 4; // Default for 'All'
      }
    });
  });
</script>
